define

# Agent entity
agent sub entity,
  owns id @key,
  owns name,
  plays execution:executor,
  plays routing:receiver;

# Action - what an agent can do
action sub entity,
  owns name @key,
  owns result,
  plays capability:action;

# Agent has actions
capability sub relation,
  relates holder,
  relates action;

agent plays capability:holder;

# Envelope - unit of communication
envelope sub entity,
  owns id @key,
  owns action-name,
  owns inputs,
  owns status,
  owns results,
  plays chain:parent,
  plays chain:callback,
  plays routing:message,
  plays execution:envelope;

# Envelope chain (callback relationship)
chain sub relation,
  relates parent,
  relates callback;

# Routing - sender/receiver
routing sub relation,
  relates sender,
  relates receiver,
  relates message;

agent plays routing:sender;

# Execution
execution sub relation,
  relates executor,
  relates envelope;

# Attributes
id sub attribute, value string;
name sub attribute, value string;
action-name sub attribute, value string;
inputs sub attribute, value string;  # JSON string
result sub attribute, value string;  # JSON string
results sub attribute, value string; # JSON string
status sub attribute, value string;  # pending | resolved | rejected
